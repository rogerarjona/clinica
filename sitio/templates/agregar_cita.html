{% extends "portal_cliente.html" %}{% load static from staticfiles %}  {% load i18n widget_tweaks %}

{% block metatags %}
    <title>Citas - {{request.user}}</title>
{% endblock %}

{% block content %}
	<div class="page-header row no-gutters py-4">
      <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
        <span class="text-uppercase page-subtitle">Dashboard / <a href="{% url 'lista_citas' %}">Mis Citas</a>  /</span>
        <h3 class="page-title">{{titulo|safe}}</h3>
      </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="card card-small mb-4">
                <p></p>
                <div class="card-body p-0 pb-3 ">
            		<form class="form form-horizontal validate-form" method="post">{% csrf_token %}
            			<div class='form-group'>  
            	            <label class="col-md-4 control-label control-label-required ">Dia de Consulta</label>
            	            <div class='col-lg-12 col-md-12 controls'>
            	                {% render_field agregar_cita_form.dia_agendado class="form-control input-sm" data-rule-required="true" %} 
            	                {{ agregar_cita_form.non_field_errors }}
            	                {{ agregar_cita_form.dia_agendado.errors }}
            	            </div>
            	        </div>

            	        <div class='form-group'>  
            	            <label class="col-md-4 control-label control-label-required">Hora de Consulta</label>
            	            <div class='col-lg-12 col-md-12 controls'>
            	                {% render_field agregar_cita_form.hora_agendado class="form-control input-sm" data-rule-required="true" %} 
            	                {{ agregar_cita_form.non_field_errors }}
            	                {{ agregar_cita_form.hora_agendado.errors }}
            	            </div>
            	        </div>

                        <div class='form-group'>  
                            <label class="col-md-4 control-label control-label-required ">Observaciones</label>
                            <div class='col-lg-12 col-md-12 controls'>
                                {% render_field agregar_cita_form.observacion class="form-control input-sm" data-rule-required="true" %} 
                                {{ agregar_cita_form.non_field_errors }}
                                {{ agregar_cita_form.observacion.errors }}
                            </div>
                        </div>

            	        <div class="form-group text-right">
                    		<div class="col-sm-12">
                        	<button type="submit" class="btn btn-primary btn-md"><i class="fa fa-floppy-o"></i> Guardar </button>
                        	<a class="btn btn-secondary" href="{% url 'lista_citas' %}">Cancelar</a>
                    	   </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block resources %}

<link href="{% static 'assets/css/bootstrap-datetimepicker.min.css' %}" rel="stylesheet" type="text/css" media="all" />
<script src="{% static 'assets/js/moment.min.js' %}"></script>
<script src="{% static 'assets/js/bootstrap-datetimepicker.js' %}"></script>

<script type="text/javascript">
	jQuery(document).ready(function(){
		var fecha_hoy = "{{fecha_hoy|safe}}"

      	$('#id_dia_agendado').datetimepicker({
        	format: "DD/MM/YYYY",
            locale: "es",
            icons: {
                time: "fas fa-clock",
                date: "fas fa-calendar",
                up: "fas fa-arrow-up",
                down: "fas fa-arrow-down",
                previous: 'fas fa-chevron-left',
                next: 'fas fa-chevron-right',
                today: 'fas fa-calendar-check',
                clear: 'fas fa-trash',
                close: 'fas fa-remove'
            }
        });

        $('#id_hora_agendado').datetimepicker({
        	format: "HH:mm",
            locale: "es",
            icons: {
                time: "fa fa-clock",
                date: "fa fa-calendar",
                up: "fa fa-arrow-up",
                down: "fa fa-arrow-down",
                previous: 'fa fa-chevron-left',
                next: 'fa fa-chevron-right',
                today: 'fa fa-calendar-check',
                clear: 'fa fa-trash',
                close: 'fa fa-remove'
            }
        });
	});
</script>

{% endblock %}